!function(e,t){var n=function(){var e=this,t=function(){};t.$inject=[],e.$get=t};n.$inject=[];var r=function(e,t){var n,r,a=new Date,o=function(e,t){for(var a=new Date(t,e,1),o=[];0!==a.getDay();)a.setDate(a.getDate()-1),o.unshift(new Date(a));for(a.getMonth()!==e&&(a=new Date(t,e,1));a.getMonth()===e;)1===a.getDate()?n=new Date(a):r=new Date(a),o.push(new Date(a)),a.setDate(a.getDate()+1);for(;0!==a.getDay();)o.push(new Date(a)),a.setDate(a.getDate()+1);return o},c=function(e){var t=e.getMonth(),n=e.getFullYear();return t+1===12?(t=0,n+=1):t+=1,e.setMonth(t),e.setFullYear(n),e},i=function(e){var t=e.getMonth(),n=e.getFullYear();return t-1===-1?(t=11,n-=1):t-=1,e.setMonth(t),e.setFullYear(n),e};return{getDaysInMonth:o,today:function(){return new Date(a.getFullYear(),a.getMonth(),a.getDate())},getDays:function(){return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},getCurrent:function(){return{min:n,max:r}},getMonths:function(){for(var e=0,n=[];12>e;)n.push(t.moment().month(e++).format("MMMM"));return n},getYears:function(e){var t=new Date,n=t.getFullYear();e&&(n=e);for(var r=[],a=n-6;n+6>a;a++)r.push(a);return r},nextMonth:c,prevMonth:i}};r.$inject=["$ionDatepicker","$window"],ionDatepickerCtrl=function(e,n,r,a){var o=this;o.hasMinValue=!1,o.minDateValue&&(o.minDateValue=new Date(o.minDateValue.getFullYear(),o.minDateValue.getMonth(),o.minDateValue.getDate()),o.hasMinValue=!0),o.today=a.today(),o.weeks=a.getDays(),o.currentDate=a.today(),o.model&&(o.currentDate=t.copy(o.model)),o.daysInMonth=a.getDaysInMonth(o.currentDate.getMonth(),o.currentDate.getFullYear()),o.currentMonth=a.getCurrent(),o.nextMonth=function(){o.currentDate=a.nextMonth(o.currentDate),o.daysInMonth=a.getDaysInMonth(o.currentDate.getMonth(),o.currentDate.getFullYear()),o.currentMonth=a.getCurrent()},o.prevMonth=function(){o.currentDate=a.prevMonth(o.currentDate),o.daysInMonth=a.getDaysInMonth(o.currentDate.getMonth(),o.currentDate.getFullYear()),o.currentMonth=a.getCurrent()},o.prevYear=function(){o.currentDate.setFullYear(o.currentDate.getFullYear()-1),o.daysInMonth=a.getDaysInMonth(o.currentDate.getMonth(),o.currentDate.getFullYear()),o.currentMonth=a.getCurrent()},o.nextYear=function(){o.currentDate.setFullYear(o.currentDate.getFullYear()+1),o.daysInMonth=a.getDaysInMonth(o.currentDate.getMonth(),o.currentDate.getFullYear()),o.currentMonth=a.getCurrent()},o.showPopup=function(){o.popup=n.show({template:"<div class='calendar-title'><div class='title'><div class='month-select' ><div ng-click='ctrl.showPopupMonth()'>{{ctrl.currentDate | date : 'MMMM'}}</div><a ng-click='ctrl.prevMonth()' class='button button-clear button-icon prev'><i class='ion-chevron-left'></i></a><a ng-click='ctrl.nextMonth()' class='button button-clear button-icon next'><i class='ion-chevron-right'></i></a></div><div class='year-select'><div ng-click='ctrl.showPopupYear()'>{{ctrl.currentDate | date : 'yyyy'}}</div><a ng-click='ctrl.prevYear()' class='button button-clear button-icon prev'><i class='ion-chevron-left'></i></a><a ng-click='ctrl.nextYear()' class='button button-clear button-icon next'><i class='ion-chevron-right'></i></a></div></div></div><div class='calendar-box'><div class='calendar-weeks' ng-repeat='day in ctrl.weeks'>{{day}}</div><div class='calendar-day' ng-repeat='day in ctrl.daysInMonth' ng-class='{\"today\": day.getTime() == ctrl.today.getTime(), \"selected\": day.getTime() == ctrl.model.getTime(), \"prev-month\": day.getTime() < ctrl.currentMonth.min.getTime(), \"next-month\": day.getTime() > ctrl.currentMonth.max.getTime(), \"min-value\": ctrl.hasMinValue && ctrl.minDateValue.getTime() > day.getTime()}' ng-click='ctrl.select(day)'>{{day.getDate()}}</div></div>",cssClass:"datepicker",scope:e.$new()})},o.setMonth=function(e){o.currentDate.setMonth(e),o.daysInMonth=a.getDaysInMonth(o.currentDate.getMonth(),o.currentDate.getFullYear()),o.currentMonth=a.getCurrent(),o.popupMonth.close()},o.showPopupMonth=function(){o.months=a.getMonths(),o.popupMonth=n.show({template:"<div class='calendar-month-box'><div class='calendar-month' ng-repeat='month in ctrl.months track by $index' ng-click='ctrl.setMonth($index)'>{{month}}</div></div>",cssClass:"datepicker-month",scope:e.$new(),buttons:[{text:"Cancel"}]})},o.setYear=function(e){o.currentDate.setFullYear(e),o.daysInMonth=a.getDaysInMonth(o.currentDate.getMonth(),o.currentDate.getFullYear()),o.currentMonth=a.getCurrent(),o.popupYear.close()},o.setYears=function(e){o.years=a.getYears(e)},o.showPopupYear=function(){o.years=a.getYears(),o.popupYear=n.show({template:"<div class='calendar-title'><div class='title'>{{ctrl.currentDate.getFullYear()}}</div><a ng-click='ctrl.setYears(ctrl.years[0] - 6)' class='button button-clear button-icon prev'><i class='ion-chevron-left'></i></a><a ng-click='ctrl.setYears(ctrl.years[11] + 7)' class='button button-clear button-icon next'><i class='ion-chevron-right'></i></a></div><div class='calendar-year-box'><div class='calendar-year' ng-repeat='year in ctrl.years track by $index' ng-class='{\"current-year\": year === ctrl.currentDate.getFullYear()}' ng-click='ctrl.setYear(year)'>{{year}}</div></div>",cssClass:"datepicker-year",scope:e.$new(),buttons:[{text:"Cancel"}]})},o.closePopup=function(){o.popup.close()},o.select=function(e){(!o.hasMinValue||e.getTime()>=o.minDateValue.getTime())&&(o.model=e,o.closePopup())}},ionDatepickerCtrl.$inject=["$scope","$ionicPopup","$filter","ionDatepickerService"],ionDatepickerLink=function(e,t,n,r){var a=function(){r.showPopup()};t.bind("click",a),r.hasMinValue&&e.$watch("ctrl.minDateValue",function(e){e&&e.getTime()>r.model&&delete r.model})};var a=function(){return{restrict:"A",bindToController:{model:"=ngModel",minDateValue:"="},scope:{},controllerAs:"ctrl",controller:ionDatepickerCtrl,link:ionDatepickerLink}};a.$inject=[];var o=function(e){return{require:"^ngModel",restrict:"A",link:function(t,n,r,a){var o=e.moment,c=r.ionDateFormat,i=r.ionDateDefault;console.log("dateFormatdateFormat",c),r.$observe("ionDateFormat",function(t){if(c!=t)if(c=t,!a.$modelValue&&i&&""!=i)a.$modelValue=e.moment(i).format(c);else{if(!(a.$modelValue||i&&""!=i))return;a.$modelValue=new Date(a.$setViewValue)}}),a.$formatters.unshift(function(t){if(!c)return"";if(t&&i&&""!=i)t=e.moment(i).format(c);else{if(!(t||i&&""!=i))return;t=e.moment(new Date).format(c)}var n=o(new Date(t)).format(c);return n}),a.$parsers.unshift(function(e){var t=o(e,c);return t&&t.isValid()&&t.year()>1950?t.toDate():""})}}};o.$inject=["$window"],t.module("ionic.datepicker",["ionic"]).provider("$ionDatepicker",n).directive("ionDatepicker",a).factory("ionDatepickerService",r).directive("ionDateFormat",o)}(window,window.angular);