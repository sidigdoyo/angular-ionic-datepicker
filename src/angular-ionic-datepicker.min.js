/**
 * angular-ionic-datepicker
 * @version v0.0.1
 * @link https://github.com/sidigdoyo/angular-ionic-datepicker
 * @license MIT
 * @author Sidigdoyo Pribadi <sidigdoyo@gmail.com>
 */


!function(e,t,n){var a=function(){var e=this,t=function(){};t.$inject=[],e.$get=t};a.$inject=[];var r=function(e){var t,n,a=new Date,r=function(e,a){for(var r=new Date(a,e,1),i=[];0!==r.getDay();)r.setDate(r.getDate()-1),i.unshift(new Date(r));for(r.getMonth()!==e&&(r=new Date(a,e,1));r.getMonth()===e;)1===r.getDate()?t=new Date(r):n=new Date(r),i.push(new Date(r)),r.setDate(r.getDate()+1);for(;0!==r.getDay();)i.push(new Date(r)),r.setDate(r.getDate()+1);return i},i=function(e){var t=e.getMonth(),n=e.getFullYear();return t+1===12?(t=0,n+=1):t+=1,e.setMonth(t),e.setFullYear(n),e},o=function(e){var t=e.getMonth(),n=e.getFullYear();return t-1===-1?(t=11,n-=1):t-=1,e.setMonth(t),e.setFullYear(n),e};return{getDaysInMonth:r,today:function(){return new Date(a.getFullYear(),a.getMonth(),a.getDate())},getDays:function(){return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},getCurrent:function(){return{min:t,max:n}},nextMonth:i,prevMonth:o}};r.$inject=["$ionDatepicker"],ionDatepickerCtrl=function(e,t,n,a){var r=this;r.hasMinValue=!1,r.minValue&&(r.minValue=new Date(r.minValue.getFullYear(),r.minValue.getMonth(),r.minValue.getDate()),r.hasMinValue=!0),r.today=a.today(),r.weeks=a.getDays(),r.currentDate=a.today(),r.daysInMonth=a.getDaysInMonth(r.today.getMonth(),r.today.getFullYear()),r.currentMonth=a.getCurrent(),r.nextMonth=function(){r.currentDate=a.nextMonth(r.currentDate),r.daysInMonth=a.getDaysInMonth(r.currentDate.getMonth(),r.currentDate.getFullYear()),r.currentMonth=a.getCurrent()},r.prevMonth=function(){r.currentDate=a.prevMonth(r.currentDate),r.daysInMonth=a.getDaysInMonth(r.currentDate.getMonth(),r.currentDate.getFullYear()),r.currentMonth=a.getCurrent()},r.showPopup=function(){r.popup=t.show({template:"<div class='calendar-title'><div class='title'>{{ctrl.currentDate | date : 'MMMM yyyy'}}</div><a ng-click='ctrl.prevMonth()' class='button button-clear button-icon prev'><i class='ion-chevron-left'></i></a><a ng-click='ctrl.nextMonth()' class='button button-clear button-icon next'><i class='ion-chevron-right'></i></a></div><div class='calendar-box'><div class='calendar-weeks' ng-repeat='day in ctrl.weeks'>{{day}}</div><div class='calendar-day' ng-repeat='day in ctrl.daysInMonth' ng-class='{\"today\": day.getTime() == ctrl.today.getTime(), \"selected\": day.getTime() == ctrl.model.getTime(), \"prev-month\": day.getTime() < ctrl.currentMonth.min.getTime(), \"next-month\": day.getTime() > ctrl.currentMonth.max.getTime(), \"min-value\": ctrl.hasMinValue && ctrl.minValue.getTime() > day.getTime()}' ng-click='ctrl.select(day)'>{{day.getDate()}}</div></div>",cssClass:"datepicker",scope:e.$new()})},r.closePopup=function(){r.popup.close()},r.select=function(e){if(!r.hasMinValue||e.getTime()>=r.minValue.getTime())r.model=e,r.closePopup();else{var a=t.alert({title:"Alert",template:"Selected date cannot be less than "+n("date")(r.minValue,"dd MMMM yyyy")});a.then(function(e){})}}},ionDatepickerCtrl.$inject=["$scope","$ionicPopup","$filter","ionDatepickerService"],ionDatepickerLink=function(e,t,n,a){var r=function(){a.showPopup()};t.bind("click",r),a.hasMinValue&&e.$watch("ctrl.minValue",function(e,t){e.getTime()>a.model&&a.showPopup()})};var i=function(){return{restrict:"A",bindToController:{model:"=ngModel",minValue:"="},scope:{},controllerAs:"ctrl",controller:ionDatepickerCtrl,link:ionDatepickerLink}};i.$inject=[];var o=function(e){return{require:"^ngModel",restrict:"A",link:function(t,n,a,r){var i=e.moment,o=a.ionDateFormat;a.$observe("ionDateFormat",function(e){o!=e&&r.$modelValue&&(o=e,r.$modelValue=new Date(r.$setViewValue))}),r.$formatters.unshift(function(e){if(!o||!e)return"";var t=i(new Date(e)).format(o);return t}),r.$parsers.unshift(function(e){var t=i(e,o);return t&&t.isValid()&&t.year()>1950?t.toDate():""})}}};o.$inject=["$window"],t.module("ionic.datepicker",["ionic"]).provider("$ionDatepicker",a).directive("ionDatepicker",i).factory("ionDatepickerService",r).directive("ionDateFormat",o)}(window,window.angular);